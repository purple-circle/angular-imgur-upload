(function(){var e;e=angular.module("imgurUpload",[]),e.service("imgurUpload",["$q",function(e){var r;return r=null,{setClientId:function(e){return r=e},upload:function(n,t){var o,a,i,u;if(null==t&&(t={}),o=e.defer(),r=t.clientId||r,null==r)return o.reject("No clientId"),o.promise;if(null==n)return o.reject("No file"),o.promise;if(!t.canvas&&!(null!=n&&null!=(i=n.type)?i.match(/image.*/):void 0))return o.reject("File not image"),o.promise;if(u=new XMLHttpRequest,u.open("POST","https://api.imgur.com/3/image.json"),u.setRequestHeader("Authorization","Client-ID "+r),u.upload.addEventListener("progress",function(e){var r;return r=parseInt(e.loaded/e.total*100),o.notify(r)},!1),!t.canvas){if("undefined"==typeof FormData||null===FormData)return o.reject("Browser doesn't support FormData"),o.promise;a=new FormData,a.append("image",n),u.send(a)}return t.canvas&&u.send(n),u.onerror=o.reject,u.onload=function(){var e;return e=JSON.parse(u.responseText),o.resolve(e)},o.promise}}}])}).call(this);